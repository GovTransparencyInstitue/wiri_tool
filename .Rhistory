df_contracts = read.csv("data/peru_contracts_example.csv")
setwd("C:/Users/alhdz/Desktop/wiri_index/wiri_tool")
# General Parameters
n_areas = 10
pilot_weights = F
df_contracts = read.csv("data/peru_contracts_example.csv")
df_survey = read.csv("data/peru_survey_example.csv")
View(df_contracts)
View(df_survey)
names(df_contracts)
# Single bidder
df_contracts$singleb <- ifelse(df_contracts$bids_count > 1, 0, 1)
df_contracts$singleb <- as.factor(df_contracts$singleb)
# Advert Period
df_contracts$submp <- as.numeric(df_contracts$bid_deadline - df_contracts$firstcall_date)
# Advert Period
# Convert tender_biddeadline to Date objects
df_contracts$bid_deadline <- as.Date(df_contracts$bid_deadline)
df_contracts$firstcall_date <- as.Date(df_contracts$firstcall_date)
# Advert Period
df_contracts$submp <- as.numeric(df_contracts$bid_deadline - df_contracts$firstcall_date)
df_contracts$submp <- df_contracts$submp / (60 * 60 * 24)  # Convert to days
df_contracts$submp <- ifelse(df_contracts$submp > 365, NA, df_contracts$submp)
df_contracts$submp <- ifelse(df_contracts$submp < 0, 0, df_contracts$submp)
df_contracts$submp10 <- cut(df_contracts$submp, breaks = quantile(df_contracts$submp, probs = seq(0, 1, 0.1), na.rm = TRUE), include.lowest = TRUE, labels = FALSE)
# No Call for Tenders
df_contracts$ncft <- ifelse(is.na(df_contracts$bid_deadline), 1, 0)
View(df_contracts)
df_contracts$award_date <- as.Date(df_contracts$award_date)
# Decision Period
df_contracts$decp <- as.numeric(df_contracts$award_date - df_contracts$bid_deadline)
df_contracts$decp <- df_contracts$decp / (60 * 60 * 24)  # Convert to days
df_contracts$decp <- ifelse(df_contracts$decp > 365, NA, df_contracts$decp)
df_contracts$decp <- ifelse(df_contracts$decp < 1, NA, df_contracts$decp)
df_contracts$decp10 <- cut(df_contracts$decp, breaks = quantile(df_contracts$decp, probs = seq(0, 1, 0.1), na.rm = TRUE), include.lowest = TRUE, labels = FALSE)
# Decision Period
df_contracts$decp <- as.numeric(df_contracts$award_date - df_contracts$bid_deadline)
df_contracts = read.csv("data/peru_contracts_example.csv")
# Single bidder
df_contracts$singleb <- ifelse(df_contracts$bids_count > 1, 0, 1)
df_contracts$singleb <- as.factor(df_contracts$singleb)
# Convert to Date objects
df_contracts$bid_deadline <- as.Date(df_contracts$bid_deadline, format = "%Y-%m-%d")
df_contracts$firstcall_date <- as.Date(df_contracts$firstcall_date, format = "%Y-%m-%d")
df_contracts$award_date <- as.Date(df_contracts$award_date, format = "%Y-%m-%d")
# Advert Period
df_contracts$submp <- as.numeric(df_contracts$bid_deadline - df_contracts$firstcall_date)
df_contracts$submp <- df_contracts$submp / (60 * 60 * 24)  # Convert to days
# Advert Period
df_contracts$submp <- as.numeric(df_contracts$bid_deadline - df_contracts$firstcall_date)
date1 <- as.Date("2023-07-27")
date2 <- as.Date("2023-08-15")
# Calculate the interval in days
interval_in_days <- as.numeric(date2 - date1)
print(interval_in_days)
# df_contracts$submp <- df_contracts$submp / (60 * 60 * 24)  # Convert to days
df_contracts$submp <- ifelse(df_contracts$submp > 365, NA, df_contracts$submp)
df_contracts$submp <- ifelse(df_contracts$submp < 0, 0, df_contracts$submp)
df_contracts$submp10 <- cut(df_contracts$submp, breaks = quantile(df_contracts$submp, probs = seq(0, 1, 0.1), na.rm = TRUE), include.lowest = TRUE, labels = FALSE)
# No Call for Tenders
df_contracts$ncft <- ifelse(is.na(df_contracts$bid_deadline), 1, 0)
# Decision Period
df_contracts$decp <- as.numeric(df_contracts$award_date - df_contracts$bid_deadline)
df_contracts$decp <- ifelse(df_contracts$decp > 365, NA, df_contracts$decp)
df_contracts$decp <- ifelse(df_contracts$decp < 1, NA, df_contracts$decp)
df_contracts$decp10 <- cut(df_contracts$decp, breaks = quantile(df_contracts$decp, probs = seq(0, 1, 0.1), na.rm = TRUE), include.lowest = TRUE, labels = FALSE)
df_contracts$decp10 <- cut(df_contracts$decp, breaks = quantile(df_contracts$decp, probs = seq(0, 1, 0.1), na.rm = TRUE), include.lowest = TRUE, labels = FALSE)
df_contracts$submp10 <- cut(df_contracts$submp, breaks = quantile(df_contracts$submp, probs = seq(0, 1, 0.1), na.rm = TRUE), duplicates.ok = TRUE, include.lowest = TRUE, labels = FALSE)
# No Call for Tenders
df_contracts$ncft <- ifelse(is.na(df_contracts$bid_deadline), 1, 0)
# Decision Period
df_contracts$decp <- as.numeric(df_contracts$award_date - df_contracts$bid_deadline)
df_contracts$decp <- ifelse(df_contracts$decp > 365, NA, df_contracts$decp)
df_contracts$decp <- ifelse(df_contracts$decp < 1, NA, df_contracts$decp)
df_contracts$decp10 <- cut(df_contracts$decp, breaks = quantile(df_contracts$decp, probs = seq(0, 1, 0.1), na.rm = TRUE), duplicates.ok = TRUE, include.lowest = TRUE, labels = FALSE)
hist(df$submp)
hist(df_contracts$submp)
hist(df_contracts$decp)
df_contracts$decp <- log(df_contracts$decp)
hist(df_contracts$decp)
df_contracts$decp10 <- cut(df_contracts$decp, breaks = quantile(df_contracts$decp, probs = seq(0, 1, 0.1), na.rm = TRUE), duplicates.ok = TRUE, include.lowest = TRUE, labels = FALSE)
df_contracts$decp <- log(df_contracts$decp)
df_contracts$decp10 <- cut(df_contracts$decp, breaks = quantile(df_contracts$decp, probs = seq(0, 1, 0.1), na.rm = TRUE), duplicates.ok = TRUE, include.lowest = TRUE, labels = FALSE)
df_contracts$decp10 <- cut(df_contracts$decp, breaks = quantile(df_contracts$decp, probs = seq(0, 1, 0.1), na.rm = TRUE), duplicates.ok = TRUE, include.lowest = TRUE, labels = FALSE)
shiny::runApp()
